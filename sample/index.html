<!DOCTYPE html>
<html>
<head>
    <title>Google OAuth Example</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
        }

        #loginBtn {
            background-color: #4285F4;
            color: #fff;
            padding: 10px 20px;
            border: none;
            cursor: pointer;
        }

        #output {
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <button id="loginBtn">Login with Google</button>
    <div id="output"></div>
    <script>
        document.getElementById('loginBtn').addEventListener('click', function() {
            // Replace with your Google OAuth API endpoint
            const googleOAuthURL = 'http://localhost:8080/api/auth/google';

            // Open the Google OAuth page in a new tab/window
            const popup = window.open(googleOAuthURL, 'Google OAuth', 'width=600,height=600');

            // Check if the popup window is closed
            const checkPopupClosed = setInterval(function() {
                if (popup.closed) {
                    clearInterval(checkPopupClosed);

                    // Make an API call to get the returned object
                    fetch('http://localhost:8080/api/auth/google/callback')
                        .then(response => response.json())
                        .then(data => {
                            // Handle the response data here
                            const outputElement = document.getElementById('output');
                            outputElement.innerHTML = JSON.stringify(data, null, 2);
                        })
                        .catch(error => {
                            console.error('Error fetching data:', error);
                        });
                }
            }, 1000);
        });
    </script>
</body>
</html>
